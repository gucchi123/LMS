# LMS クイックスタートガイド

## 🎉 LMSが正常に起動しました！

アプリケーションは以下のURLでアクセスできます：
- **ローカルアクセス**: http://127.0.0.1:5000

## 📝 デフォルトアカウント

### 管理者アカウント
- **ユーザー名**: `admin`
- **パスワード**: `admin123`
- **権限**: すべての機能（全カテゴリーアクセス、動画管理、ユーザー統計閲覧）

### 業種別ユーザーアカウント（パスワードは全て `user123`）

| 業種 | ユーザー名 | 会社名 |
|-----|-----------|-------|
| 🏨 宿泊 | `hotel_tanaka` | グランドホテル東京 |
| 🏨 宿泊 | `ryokan_suzuki` | 湯元旅館 |
| 🏪 小売 | `retail_yamada` | スーパーマート |
| 🏪 小売 | `shop_sato` | ファッションストア |
| 🍽️ 飲食 | `restaurant_ito` | さくらレストラン |
| 💗 介護 | `care_watanabe` | スマイルケアセンター |
| 🏥 医療 | `medical_takahashi` | セントラルクリニック |
| 🎓 教育 | `edu_kobayashi` | ブライトアカデミー |

> 💡 **ポイント**: 業種別ユーザーは、自分の業種に対応したカテゴリーのみ閲覧できます

## 🚀 使い方

### 1. ログイン
1. ブラウザで http://127.0.0.1:5000 を開く
2. アカウント情報を入力してログイン
3. 管理者は管理画面へ、一般ユーザーはコースカタログへ遷移

### 2. コースを閲覧（ユーザー）
1. コースカタログでカテゴリーを選択
2. 自分の業種に対応したカテゴリーのみ表示されます
3. カテゴリー内の動画を選択して視聴

### 3. 動画を視聴（ユーザー）
1. 動画が自動的に再生開始
2. **進捗は5秒ごとに自動保存**されます
3. 次回視聴時は**続きから再生**できます

### 4. 動画を管理（管理者）
1. 「新しい動画をアップロード」ボタンで動画追加
2. 鉛筆アイコンで動画情報を編集
3. ゴミ箱アイコンで動画を削除

### 5. カテゴリーを管理（管理者）
1. 「新しいカテゴリーを追加」で作成
2. 🔐ボタンでアクセス制御を設定
3. 業種を選択して保存

### 6. 業種を管理（管理者）
1. 「新しい業種を追加」で業種を作成
2. 鉛筆アイコンで編集
3. ゴミ箱アイコンで削除

### 7. ユーザーを管理（管理者）
1. 「新しいユーザーを追加」でユーザー作成
2. 業種と会社名を設定
3. 視聴統計で進捗を確認

## 📊 主な機能

### ✅ 実装済み機能
- [x] ユーザー認証（ログイン/ログアウト）
- [x] 動画アップロード（MP4, AVI, MOV, MKV, WebM対応）
- [x] 動画視聴（Video.jsプレイヤー）
- [x] 視聴進捗の自動保存
- [x] 前回の続きから再生
- [x] 動画の編集・削除
- [x] カテゴリー管理（階層構造対応）
- [x] **業種管理**（追加・編集・削除）
- [x] **業種別アクセス制御**
- [x] ユーザー管理（業種・会社名設定）
- [x] ユーザーごとの視聴統計
- [x] 進捗バーとステータス表示
- [x] レスポンシブデザイン（モバイル対応）

## 🏢 業種別アクセス制御

### カテゴリー構造
```
├── 基礎編              [全業種公開]
├── 応用編              [全業種公開]
├── 実践編              [全業種公開]
├── 宿泊業向けAI活用    [宿泊業のみ]
├── 小売業向けAI活用    [小売業のみ]
├── 飲食業向けAI活用    [飲食業のみ]
├── 介護業向けAI活用    [介護業のみ]
├── 医療業向けAI活用    [医療業のみ]
└── 教育業向けAI活用    [教育業のみ]
```

### 試してみよう！
1. `hotel_tanaka` でログイン → 宿泊業カテゴリーが見える
2. `retail_yamada` でログイン → 小売業カテゴリーが見える
3. `admin` でログイン → すべてのカテゴリーが見える

## 🎬 サンプル動画

フォルダ内の動画「Rakuten AI for Businessのご紹介」が自動的にデータベースに登録されています。

## 🔧 サーバーの操作

### サーバーを停止
ターミナルで `Ctrl + C` を押す

### サーバーを再起動
```bash
cd "50Development/LMS"
python app.py
```

### データベースをリセット
```bash
python init_db.py
```
**注意**: これにより全てのユーザーデータと進捗がリセットされます

### テストを実行
```bash
python -m pytest test_app.py -v
```

## 📁 ファイル構造

```
50Development/LMS/
├── app.py                  # メインアプリケーション
├── init_db.py              # データベース初期化
├── test_app.py             # テストスイート（29テスト）
├── requirements.txt        # 依存パッケージ
├── lms.db                  # SQLiteデータベース
├── videos/                 # アップロードされた動画
├── templates/              # HTMLテンプレート
│   ├── login.html          # ログインページ
│   ├── course_catalog.html # コースカタログ
│   ├── category_detail.html # カテゴリー詳細
│   ├── dashboard.html      # ダッシュボード
│   ├── watch.html          # 動画視聴
│   └── admin.html          # 管理画面
├── README.md               # 詳細ドキュメント
├── QUICKSTART.md           # このファイル
└── DEPLOYMENT.md           # デプロイガイド
```

## 🔐 セキュリティに関する注意

**本番環境で使用する場合は必ず以下を実施してください**:

1. **Secret Keyの変更**
   `app.py` の以下の行を変更:
   ```python
   app.secret_key = 'your-secret-key-change-this-in-production'
   ```
   強力なランダム文字列に変更してください。

2. **デフォルトパスワードの変更**
   管理者アカウントと全ユーザーアカウントのパスワードを変更

3. **Debug モードの無効化**
   環境変数 `FLASK_ENV=production` を設定

4. **HTTPS の使用**
   本番環境では必ずHTTPSを使用してください

## 🆘 トラブルシューティング

### サーバーが起動しない
- Pythonがインストールされているか確認
- 必要なパッケージがインストールされているか確認: `pip install -r requirements.txt`
- ポート5000が既に使用されていないか確認

### 動画が再生されない
- ブラウザが動画形式をサポートしているか確認
- MP4形式（H.264コーデック）が最も互換性が高い
- ブラウザのコンソールでエラーを確認（F12キー）

### カテゴリーが表示されない
- ログインユーザーの業種を確認
- 管理画面でカテゴリーのアクセス制御設定を確認

### 進捗が保存されない
- ブラウザのJavaScriptが有効になっているか確認
- ブラウザのコンソールでエラーを確認
- データベースファイル `lms.db` の書き込み権限を確認

### アップロードが失敗する
- ファイルサイズが500MBを超えていないか確認
- ファイル形式が対応しているか確認（MP4, AVI, MOV, MKV, WebM）
- `videos/` フォルダの書き込み権限を確認

## 📞 サポート

問題が発生した場合や機能追加のリクエストがある場合は、開発チームまでご連絡ください。

---

**Have fun learning! 📚✨**
